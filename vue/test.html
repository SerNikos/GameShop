<!DOCTYPE html>
<html>
<head>
  <title>Update User Profile</title>
</head>
<body>
  <h1>Update User Profile</h1>
  <form id="updateProfileForm">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" />
    <br />
    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" />
    <br />
    <label for="location">Location:</label>
    <input type="text" id="location" />
    <br />
    <label for="bio">Bio:</label>
    <input type="text" id="bio" />
    <br />
    <label for="password">Password:</label>
    <input type="password" id="password" />
    <br />
    <button type="submit">Update Profile</button>
  </form>

  <script>
    document.getElementById('updateProfileForm').addEventListener('submit', updateProfile);

    function updateProfile(event) {
      event.preventDefault();

      // Prepare the user's data to be sent to the server
      let data = JSON.stringify({
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        location: document.getElementById('location').value,
        bio: document.getElementById('bio').value,
        password: document.getElementById('password').value
      });

      // Send a PUT request to the server with the updated data
      fetch('http://localhost:6464/api/users/1', {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem("access_token")}`
        },
        body: data
      })
        .then(response => {
          if (response.ok) {
            // If the request is successful, show a success message and redirect the user back to the profile page
            alert('Profile updated!');
            window.location.href = "profile.html";
          } else {
            // If there's an error, show an error message
            alert('Failed to update profile.');
          }
        })
        .catch(error => console.error(error));
    }
  </script>
</body>
</html>
